<div class="shell">
  <mat-card class="auth-card">
    <div class="card-header">
      <span class="badge">Добро пожаловать</span>
      <h1>Войдите в&nbsp;рабочее пространство</h1>
      <p>Используйте корпоративную почту, чтобы синхронизировать проекты, встречи и уведомления.</p>
    </div>

    <form class="form" [formGroup]="loginForm" (ngSubmit)="submit()" novalidate>
      <mat-form-field appearance="outline">
        <mat-label>Электронная почта</mat-label>
        <input
          matInput
          formControlName="email"
          type="email"
          placeholder="you@example.com"
          autocomplete="email"
          inputmode="email"
          required
        />
        <mat-icon matSuffix fontSet="material-symbols-rounded">mail</mat-icon>
        <mat-error *ngIf="emailControl?.hasError('required')">Укажите электронную почту.</mat-error>
        <mat-error *ngIf="emailControl?.hasError('email')">Введите корректный адрес.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Пароль</mat-label>
        <input
          matInput
          [type]="hidePassword() ? 'password' : 'text'"
          formControlName="password"
          placeholder="••••••••"
          autocomplete="current-password"
          required
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          (click)="togglePasswordVisibility()"
          [attr.aria-label]="hidePassword() ? 'Показать пароль' : 'Скрыть пароль'"
        >
          <mat-icon fontSet="material-symbols-rounded">
            {{ hidePassword() ? 'visibility' : 'visibility_off' }}
          </mat-icon>
        </button>
        <mat-error *ngIf="passwordControl?.hasError('required')">Введите пароль.</mat-error>
        <mat-error *ngIf="passwordControl?.hasError('minlength')">
          Минимальная длина пароля — {{ passwordControl?.getError('minlength')?.requiredLength }} символов.
        </mat-error>
      </mat-form-field>

      <div class="form-footer">
        <mat-checkbox formControlName="remember">Запомнить меня</mat-checkbox>
        <a class="link" href="#">Забыли пароль?</a>
      </div>

      <button mat-flat-button color="primary" class="submit" type="submit" [disabled]="loading() || loginForm.invalid">
        <mat-progress-spinner
          *ngIf="loading()"
          class="spinner"
          diameter="18"
          mode="indeterminate"
        ></mat-progress-spinner>
        <span *ngIf="!loading()">Войти</span>
      </button>
    </form>

    <div class="divider">
      <mat-divider></mat-divider>
      <span>или</span>
      <mat-divider></mat-divider>
    </div>

    <div class="providers">
      <button mat-stroked-button type="button" (click)="signInWithProvider('google')" [disabled]="loading()">
        <mat-icon fontSet="material-symbols-rounded">public</mat-icon>
        <span>Войти через Google</span>
      </button>
      <button mat-stroked-button type="button" (click)="signInWithProvider('microsoft')" [disabled]="loading()">
        <mat-icon fontSet="material-symbols-rounded">workspaces</mat-icon>
        <span>Войти через Microsoft</span>
      </button>
    </div>

    <div
      class="status"
      *ngIf="statusMessage()"
      [class.status--success]="statusType() === 'success'"
      [class.status--error]="statusType() === 'error'"
      role="status"
      aria-live="polite"
    >
      <mat-icon fontSet="material-symbols-rounded" aria-hidden="true">
        {{ statusType() === 'success' ? 'check_circle' : 'error' }}
      </mat-icon>
      <span>{{ statusMessage() }}</span>
    </div>
  </mat-card>

  <aside class="showcase" aria-hidden="true">
    <div class="showcase__content">
      <span class="showcase__label">PM Services</span>
      <h2>Работайте гибко и&nbsp;безопасно</h2>
      <p>
        Современная платформа управления проектами с аналитикой, автоматизацией процессов и единым центром коммуникаций.
      </p>
      <ul>
        <li *ngFor="let item of highlights">
          <mat-icon fontSet="material-symbols-rounded">{{ item.icon }}</mat-icon>
          <div>
            <h3>{{ item.title }}</h3>
            <p>{{ item.description }}</p>
          </div>
        </li>
      </ul>
    </div>
  </aside>
</div>
